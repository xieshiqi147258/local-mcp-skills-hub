# MCP Skills Hub - 设计方案

## 产品定位

面向开发者的本地 MCP 生态管理工具，集 **Skills 管理**、**MCP Server 管理**、**AI 辅助优化** 于一体。

---

## 技术栈

| 层级 | 技术选型 |
|------|----------|
| 桌面框架 | Tauri 2.0 (Rust) |
| 前端框架 | Vue 3 + TypeScript |
| UI 组件库 | Arco Design |
| 状态管理 | Pinia |
| 代码编辑器 | Monaco Editor |
| 构建工具 | Vite |
| AI 集成 | 多提供商适配层 |

---

## 整体架构

```
┌──────────────────────────────────────────────────────────────────────┐
│                         MCP Skills Hub                               │
├──────────────────────────────────────────────────────────────────────┤
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐     │
│  │  Skills    │  │    MCP     │  │    AI      │  │   设置     │     │
│  │  管理      │  │   管理     │  │   助手     │  │   中心     │     │
│  └─────┬──────┘  └─────┬──────┘  └─────┬──────┘  └─────┬──────┘     │
│        │               │               │               │             │
│  ┌─────┴──────┐  ┌─────┴──────┐  ┌─────┴──────┐  ┌─────┴──────┐     │
│  │• 文件浏览  │  │• 配置编辑  │  │• 语法检查  │  │• 路径配置  │     │
│  │• 代码编辑  │  │• 进程管理  │  │• 优化建议  │  │• AI 配置   │     │
│  │• 实时预览  │  │• Tools浏览 │  │• 生成Skill │  │• 主题设置  │     │
│  │• 模板库    │  │• 日志查看  │  │• 效果评估  │  │• 导入导出  │     │
│  │• 测试运行  │  │• 多平台    │  │• 多语言    │  │• 快捷键    │     │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘     │
├──────────────────────────────────────────────────────────────────────┤
│                      Tauri Backend (Rust)                            │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐   │
│  │ 文件系统 │ │ 进程管理 │ │MCP Client│ │ AI 适配  │ │ 配置解析 │   │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────┘   │
└──────────────────────────────────────────────────────────────────────┘
```

---

## 模块一：Skills 管理

### 1.1 Skills 浏览器

**界面示意：**
```
┌─────────────────────────────────────────────────────────┐
│ 🔍 搜索...                [类型▼] [标签▼] [+ 新建]     │
├─────────────────────────────────────────────────────────┤
│ 📂 Claude Code Skills                                   │
│   ├── 📄 code-review.md              ⭐                │
│   ├── 📄 git-commit.md                                  │
│   └── 📄 refactor-helper.md                             │
│ 📂 MCP Configs                                          │
│   ├── 📄 filesystem-server.json                         │
│   └── 📄 database-server.json                           │
└─────────────────────────────────────────────────────────┘
```

**功能点：**
- 树形目录展示
- 实时搜索过滤
- 标签分类管理
- 收藏/常用标记
- 右键上下文菜单
- 拖拽移动/复制
- 支持 .md / .json / .yaml 格式

### 1.2 Skills 编辑器

**界面示意：**
```
┌─────────────────────────────────────────────────────────────────┐
│ 📄 code-review.md              [AI优化] [预览] [保存] [测试]   │
├─────────────────────────────┬───────────────────────────────────┤
│  1 │ # Code Review          │  # Code Review                    │
│  2 │                        │                                   │
│  3 │ ## Description         │  ## Description                   │
│  4 │ Review code for...     │  Review code for quality and...   │
│  5 │                        │                                   │
│    │   [Monaco Editor]      │     [Markdown Preview]            │
└─────────────────────────────┴───────────────────────────────────┘
```

**功能点：**
- Monaco Editor 代码编辑（语法高亮、自动补全）
- 实时 Markdown 预览（分屏/切换模式）
- 模板快速创建
- 自动保存 + 版本历史
- 快捷键支持

### 1.3 Skills 测试台

**界面示意：**
```
┌─────────────────────────────────────────────────────────────────┐
│ 🧪 测试: code-review.md                          [运行] [清空] │
├─────────────────────────────────────────────────────────────────┤
│ 输入参数:                                                       │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ { "code": "function test() { ... }" }                       │ │
│ └─────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│ 输出结果:                                        耗时: 1.2s    │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ ✅ 代码审查完成                                              │ │
│ │ - 建议: 添加错误处理...                                      │ │
│ └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

**功能点：**
- 模拟 Skill 调用
- JSON 参数编辑器
- 输出结果展示
- 执行耗时统计
- 历史记录保存

### 1.4 模板库

内置常用 Skill 模板：
- 代码审查模板
- Git 提交消息模板
- 文档生成模板
- 测试用例生成模板
- 自定义模板管理

---

## 模块二：MCP 管理

### 2.1 配置管理（多平台支持）

**支持的配置路径：**

| 平台 | Windows 路径 | macOS/Linux 路径 |
|------|-------------|------------------|
| Claude Desktop | `%APPDATA%/Claude/claude_desktop_config.json` | `~/Library/Application Support/Claude/claude_deconfig.json` |
| Claude Code | `%USERPROFILE%/.claude/settings.json` | `~/.claude/settings.json` |
| Cursor | `%USERPROFILE%/.cursor/mcp.json` | `~/.cursor/mcp.json` |
| 自定义 | 用户指定路径 | 用户指定路径 |

**界面示意：**
```
┌─────────────────────────────────────────────────────────────────┐
│ 📋 MCP 配置管理                                    [+ 添加]    │
├─────────────────────────────────────────────────────────────────┤
│ 平台选择:  [Claude Desktop] [Claude Code] [Cursor] [自定义]    │
├─────────────────────────────────────────────────────────────────┤
│ 当前配置: Claude Desktop                                        │
│ 路径: %APPDATA%/Claude/claude_desktop_config.json              │
├─────────────────────────────────────────────────────────────────┤
│ MCP Servers:                                                    │
│ ┌───────────────┬──────────┬─────────┬────────────────────────┐ │
│ │ 名称          │ 类型     │ 状态    │ 操作                   │ │
│ ├───────────────┼──────────┼─────────┼────────────────────────┤ │
│ │ filesystem    │ stdio    │ 🟢 运行 │ [停止] [编辑] [删除]   │ │
│ │ database      │ stdio    │ 🔴 停止 │ [启动] [编辑] [删除]   │ │
│ │ web-search    │ sse      │ 🟡 错误 │ [重启] [日志] [删除]   │ │
│ └───────────────┴──────────┴─────────┴────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

**功能点：**
- 多平台配置切换
- 可视化配置编辑
- 一键添加/删除 Server
- 配置验证检查
- 配置导入/导出

### 2.2 进程管理

**功能点：**
- 查看 MCP Server 运行状态
- 启动/停止/重启 Server
- 进程资源监控（CPU、内存）
- 批量操作

### 2.3 MCP Tools 浏览器

**界面示意：**
```
┌─────────────────────────────────────────────────────────────────┐
│ 🔧 Tools 浏览: filesystem                         [刷新] [测试]│
├─────────────────────────────────────────────────────────────────┤
│ ┌──────────────────────────────────────────────────────────│ │ 📦 read_file                                                │ │
│ │    读取指定路径的文件内容                                    │ │
│ │    参数: path (string, required)                            │ │
│ ├─────────────────────────────────────────────────────────────┤ │
│ │ 📦 write_file                                               │ │
│ │    写入内容到指定文件                                        │ │
│ │    参数: path (string), content (string)                    │ │
│ ├─────────────────────────────────────────────────────────────┤ │
│ │ 📦 list_directory                                           │ │
│ │    列出目录内容                                              │ │
│ │    参数: path (string)                                      │ │
│ └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

**功能点：**
- 自动发现 Server 提供的 Tools
- 展示 Tool 名称、描述、参数
- 在线测试 Tool 调用
- 生成调用示例代码

### 2.4 日志查看器

**功能点：**
- 实时日志流
- 日志级别过滤（INFO/WARN/ERROR）
- 关键字搜索
- 日志导出
- 错误高亮

---

## 模块三：AI 助手

### 3.1 支持的 AI 提供商

| 提供商 | 说明 |
|--------|------|
| Anthropic Claude | Claude API，与 MCP 生态最契合 |
| OpenAI | GPT-4 等模型 |
| Ollama | 本地运行的开源模型，无需联网 |
| 兼容 API | DeepSeek 等兼容 OpenAI 接口的服务 |

### 3.2 AI 功能

#### 3.2.1 语法检查与优化建议

```
┌─────────────────────────────────────────────────────────────────┐
│ 🔍 Skill 检查结果                                              │
├─────────────────────────────────────────────────────────────────┤
│ ⚠️ 警告: 缺少 Description 部分                                  │
│ ⚠️ 建议: Instructions 可以更具体                                │
│ ✅ 通过: 格式正确                                               │
├─────────────────────────────────────────────────────────────────┤
│ 💡 优化建议:                                                    │
│ 1. 添加具体的使用示例                                  │
│ 2. 明确输入输出格式                                             │
│ 3. 增加边界情况处理说明                                         │
│                                                    [应用建议]   │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.2.2 AI 生成 Skill

```
┌─────────────────────────────────────────────────────────────────┐
│ ✨ AI 生成 Skill                                               │
├─────────────────────────────────────────────────────────────────┤
│ 描述你想要的 Skill:                                             │
│ ┌─────────────────────────────────────────────────────────────┐ 个帮助我写 Git commit message 的 skill，要求：       │ │
│ │ 1. 分析代码变更                                              │ │
│ │ 2. 生成符合 Conventional Commits 规范的消息                  │ │
│ │ 3. 支持中英文                                                │ │
│ └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│ [生成 Skill]                                                    │
├────────────────────────────────────────────────────────────┤
│ 生成结果预览:                                                   │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ # Git Commit Message Generator                              │ │
│ │ ...                                                         │ │
│ └─────────────────────────────────────────────────────────────┘ │
│                                          [编辑] [保存] [重新生成]│
└─────────────────────────────────────────────────────────────────┘
```

#### 3.2.3 效果评估测试

- 模拟多种输入场景
- 评估 Skill 输出质量
- 生成评估报告
- 对比不同版本效果

#### 3.2.4 多语言翻译

- 中英文互译
- 保持 Skill 结构不变
- 批量翻译支持

### 3.3 交互方式

**方式一：对话式 AI 助手（侧边栏）**
```
┌──────────────────────────────────────┐
│ 🤖 AI 助手                          │
├──────────────────────────────────────┤
│ 👤 帮我优化这个 skill 的 prompt      │
│                                      │
│ 🤖 我分析了你的 skill，有以下建议：  │
│    1. 指令可以更明确...              │
│    2. 建议添加示例...                │
│                                      │
│ 👤 应用第一条建议                    │
│                                      │
│ 🤖 已应用，请查看编辑器中的变更      │
├──────────────────────────────────────┤
│ [输入消息...]              [发送]   │
└──────────────────────────────────────┘
```

**方式二：快捷操作按钮**
- 编辑器工具栏：[AI 检查] [AI 优化] [AI 翻译]
- 右键菜单：优化选中内容
- 快捷键：Ctrl+Shift+O 优化

---

## 模块四：设置中心

### 4.1 路径配置

- Skills 存储目录
- MCP 配置文件路径
- 模板目录
- 日志目录

### 4.2 AI 配置

```
┌─────────────────────────────────────────────────────────────────┐
│ 🤖 AI 配置                                                      │
├─────────────────────────────────────────────────────────────────┤
│ 默认提供商: [Anthropic Claude ▼]                                │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ Anthropic Claude                                            │ │
│ │ API Key: sk-ant-************************ [显示]            │ │
│ │ Model: claude-3-5-sonnet [▼]                                │ │
│ │ Base URL: https://api.anthropic.com (可选)                  │ │
│ └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ OpenAI                                          │ │
│ │ API Key: sk-************************ [显示]                 │ │
│ │ Model: gpt-4 [▼]                                            │ │
│ └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ Ollama (本地)                                               │ │
│ │ Endpoint: http://localhost:11434                            │ │
│ │ Model: llama3 [▼]                                           │ │
│ └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ 兼容 API                                                    │ │
│ │ Base URL: https://api.deepseek.com                          │ │
│ │ API Key: ************************ [显示]                    │ │
│ │ Model: deepseek-chat [▼]                                    │ │
│ └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

### 4.3 外观设置

- 主题切换（亮色/暗色/跟随系统）
- 字体大小
- 编辑器主题
- 语言设置（中文/英文）

### 4.4 快捷键配置

| 功能 |------|-----------|
| 新建 Skill | Ctrl+N |
| 保存 | Ctrl+S |
| 搜索 | Ctrl+F |
| AI 优化 | Ctrl+Shift+O |
| 运行测试 | F5 |
| 切换预览 | Ctrl+P |

### 4.5 导入/导出

- 导出所有 Skills
- 导出配置
- 从备份恢复
- 批量导入

---

## 项目结构

```
local-mcp-skills-hub/
├── docs/                       # 文档
│   └── DESIGN.md              # 设计文档
├── src-tauri/                  # Tauri 后端 (Rust)
│   ├── src/
│   │   ├── main.rs            # 入口
│   │   ├── lib.rs             # 库入口
│   │   ├── commands/          # Tauri 命令
│   │   │   ├── mod.rs
│   │   │   ├── skills.rs      # Skills CRUD
│   │   │   ├── mcp.rs         # MCP 管理
│   │   │   ├── config.rs      # 配置管理
│   │   │   ├── ai.rs          # AI 接口
│   │   │   └── process.rs     # 进程管理
│   │   ├── services/          # 业务逻辑
│   │   │   ├── mod.rs
│   │   │   ├── file_service.rs
│   │   │   ├── mcp_client.rs
│   │   │   ├── ai_provider.rs
│   │   │   └── process_manager.rs
│   │   └── utils/             # 工具函数
│   │       ├── mod.rs
│   │       └── paths.rs
│   ├── Cargo.toml
│   └── tauri.conf.json
├── src/                        # Vue 前端
│   ├── assets/                # 静态资源
│   ├── components/            # 组件
│   │   ├── common/            # 通用组件
│   │   │   ├── AppHeader.vue
│   │   │   ├── AppSidebar.vue
│   │   │   └── AppFooter.vue
│   │   ├── skills/            # Skills 相关组件
│   │   │   ├── SkillBrowser.vue
│   │   │   ├── SkillEditor.vue
│   │   │   ├── SkillPreview.vue
│   │   │   ├── SkillTester.vue
│   │   │   └── TemplateSelector.vue
│   │   ├── mcp/               # MCP 相关组件
│   │   │   ├── McpConfigEditor.vue
│   │   │   ├── McpServerList.vue
│   │   │   ├── McpToolsBrowser.vue
│   │   │   ├── McpLogViewer.vue
│   │   │   └── McpProcessManager.vue
│   │   ├── ai/                # AI 相关组件
│   │   │   ├── AiAssistant.vue
│   │   │   ├── AiChecker.vue
│   │   │   ├── AiGenerator.vue
│   │   │   └── AiTranslator.vue
│   │   └── settings/          # 设置相关组件
│   │       ├── PathSettings.vue
│   │       ├── AiSettings.vue
│   │       ├── AppearanceSettings.vue
│   │       └── ShortcutSettings.vue
│   ├── views/                 # 页面视图
│   │   ├── HomeView.vue
│   │   ├── SkillsView.vue
│   │   ├── McpView.vue
│   │   └── SettingsView.vue
│   ├── stores/                # Pinia 状态管理
│   │   ├── index.ts
│   │   ├── skills.ts
│   │   ├── mcp.ts
│   │   ├── ai.ts
│   │   └── settings.ts
│   ├── composables/           # 组合式函数
│   │   ├── useSkills.ts
│   │   ├── useMcp.ts
│   │   ├── useAi.ts
│   │   └── useTauri.ts
│   ├── types/                 # TypeScript 类型
│   │   ├── skill.ts
│   │   ├── mcp.ts
│   │   ├── ai.ts
│   │   └── settings.ts
│   ├── utils/                 # 工具函数
│   │   ├── parser.ts          # Skill 解析器
│   │   └── formatter.ts
│   ├── router/                # 路由
│   │   └── index.ts
│   ├── App.vue
│   └── main.ts
├── public/                     # 公共资源
├── package.json
├── vite.config.ts
├── tsconfig.json
└── README.md
```

---

## 界面布局

### 主界面布局

```
┌────────────────────────────────────────────────────────────────────┐
│  ☰  MCP Skills Hub                              ─  □  ✕          │
├────────┬───────────────────────────────────────────────┬───────────┤
│        │                                               │           │
│  导航  │              主内容区域                        │  AI 助手  │
│        │                                               │  (可折叠) │
│ Skills │  ┌─────────────────────────────────────────┐  │           │
│        │  │                                         │  │  🤖       │
│  MCP   │  │                             │  │           │
│        │  │                                         │  │  对话     │
│ 设置   │  │                                         │  │  区域     │
│        │  │                                         │  │           │
│        │  └─────────────────────────────────────────┘  │           │
│        │                                               │           │
├────────┴───────────────────────────────────────────────┴───────────┤
│  状态栏: 已连接 3 个 MCP Server | Claude API ✓ | 自动保存 ✓       │
└────────────────────────────────────────────────────────────────────┘
```

---

## 开发计划

### Phase 1: 基础框架
- [ ] 项目初始化（Tauri + Vue 3 + Arco Design）
- [ ] 基础布局和路由
- [ ] 文件系统操作（Rust 后端）

### Phase 2: Skills 管理
- [ ] Skills 浏览器
- [ ] Monaco Editor 集成
- [ ] Markdown 预览
- [ ] 模板系统

### Phase 3: MCP 管理
- [ ] 配置文件解析
- [ ] 多平台配置支持
- [ ] 进程管理
- [ ] Tools 浏览器
- [ ] 日志查看器

### Phase 4: AI 集成
- [ ] AI 提供商适配层
- [ ] 语法检查功能
- [ ] 优化建议功能
- [ ] AI 生成 Skill
- [ ] 对话式助手

### Phase 5: 完善优化
- [ ] 设置中心
- [ ] 快捷键系统
- [ ] 导入导出
- [ ] 多语言支持
- [ ] 性能优化

---

## 技术要点

### Tauri 后端关键功能

1. **文件系统操作**: 读写 Skills 文件、监听文件变化
2. **进程管理**: 启动/停止 MCP Server 进程
3. **MCP 客户端**: 与 MCP Server 通信，获取 Tools 列表
4. **AI 请求代理**: 统一处理各 AI 提供商的 API 调用
5. **配置管理**: 读写各平台配置文件

### 前端关键功能

1. **Monaco Editor**: 代码编辑、语法高亮
2. **Markdown 渲染**: 实时预览
3. **状态管理**: Pinia 管理全局状态
4. **响应式布局**: 适配不同窗口大小
